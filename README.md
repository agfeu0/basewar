# BaseWar (기지전쟁) Minecraft Plugin

## 프로젝트 소개
BaseWar는 팀 기반의 마인크래프트 PvP 플러그인입니다. 각 팀은 자신들의 신호기(비콘)를 보호하면서 상대 팀의 신호기를 파괴하는 것을 목표로 합니다. 최후까지 살아남는 팀이 승리합니다.

## 주요 기능
*   **팀 기반 게임플레이**: 여러 팀으로 나뉘어 전략적인 전투를 펼칩니다.
*   **신호기 시스템**:
    *   게임 시작 시 각 팀의 플레이어에게 신호기가 지급되며, 플레이어가 직접 원하는 위치에 설치하여 팀의 스폰 지점을 설정합니다.
    *   신호기 설치 시, 아래에 파괴 불가능한 3x3 철 블록 기반이 자동으로 생성되어 신호기 빛줄기가 활성화됩니다.
    *   신호기 주변에는 팀 색깔에 맞는 염색된 유리 블록이 장식으로 설치됩니다.
    *   **신호기 설치 시 팀 좌표 자동 안내**: 팀원이 신호기를 설치하면 같은 팀원들에게 자동으로 좌표가 안내됩니다.
    *   **폭발 방지**: 신호기는 폭발에 의해 파괴되지 않습니다.
    *   **채굴 피로 효과**: 적 팀의 신호기를 채굴할 때 채굴 피로 I 효과를 받습니다.
*   **리스폰 시스템**:
    *   팀의 신호기가 활성화되어 있는 동안, 팀원은 사망 후 리스폰 버튼 클릭 시 5초의 대기 시간(관전 모드 및 타이틀 카운트다운)을 거쳐 신호기 바로 위에서 리스폰됩니다.
    *   신호기가 설치되기 전에 사망하면 일반 리스폰됩니다.
*   **신호기 파괴 및 팀 탈락**:
    *   상대 팀의 신호기를 파괴하면 해당 팀은 더 이상 리스폰할 수 없게 됩니다.
    *   신호기 파괴 시, 아래의 철 블록 기반과 주변 유리 블록도 함께 제거됩니다.
    *   신호기가 파괴된 팀의 플레이어가 사망하면 게임에서 최종 탈락하고 관전 모드로 전환됩니다.
*   **글로벌 시작 스폰 지점**:
    *   관리자가 `/bw config setspawn` 명령어로 게임 시작 시 모든 플레이어가 텔레포트될 단일 스폰 지점을 설정할 수 있습니다.
    *   만약 설정되지 않았다면, 기본 월드 스폰 지점에서 게임이 시작됩니다.
*   **플레이어 상태 관리**: 게임 시작 시 플레이어의 인벤토리가 초기화되고, 체력 및 게임 모드가 설정됩니다.
*   **아군 공격 방지**: 같은 팀원끼리는 공격할 수 없습니다.
*   **무적 시간**: 게임 시작 시 설정된 시간(기본 15분) 동안 모든 플레이어는 무적 상태가 됩니다. 남은 시간은 보스바에 분/초 단위로 표시되며, 시간이 줄어들수록 색상이 초록색에서 노란색, 빨간색으로 변합니다.
*   **팀 채팅**: `/bw team` 명령어를 통해 팀 채팅 모드를 켜고 끌 수 있습니다. 팀 채팅이 활성화되면 일반 채팅 대신 같은 팀원에게만 메시지가 전달됩니다.

## 최근 업데이트
*   **사운드 효과 추가**: 게임 시작 카운트다운, 게임 시작, 무적 시간 종료 시 효과음이 추가되었습니다.
*   **채팅 색상 개선**: 팀 합류 메시지 및 일반 채팅 시 닉네임이 팀 색상에 맞춰 표시됩니다.
*   **신호기 기반 보호**: 신호기 아래의 3x3 철 블록 기반이 폭발로부터 보호됩니다.
*   **사망 시 스펙터 모드 전환 문제 해결**: 신호기 설치 전 사망 시 스펙터 모드로 전환되던 문제가 해결되어 정상적으로 리스폰됩니다.
*   **재접속 시 이름 색상 초기화 문제 해결**: 재접속 시 팀 색상이 적용되지 않던 문제가 해결되어 이름이 팀 색상으로 유지됩니다.

## 플러그인 다운로드
* [릴리즈](https://github.com/agfeu0/basewar/releases/tag/basewar)

## 마인크래프트 버전
* 1.21.x (최신 버전과의 호환성은 테스트 필요)

## 설정 (config.yml)
플러그인을 처음 실행하면 `plugins/BaseWar/config.yml` 파일이 생성됩니다.

```yaml
# 기지전쟁 플러그인 설정 파일

# 사용될 팀 목록을 정의합니다.
teams:
  RED:
  BLUE:
  YELLOW:
  GREEN:

# 게임 시작 후 무적 시간 (초 단위)
invincibility-duration: 900
```
*   `teams`: 게임에 참여할 팀 목록을 정의합니다. 여기에 정의된 팀만 게임에 참여할 수 있습니다.
*   `invincibility-duration`: 게임 시작 후 플레이어에게 적용되는 무적 시간(초 단위)을 설정합니다. (기본값: 900초 = 15분)

`global-spawn` 설정은 인게임 명령어 `/bw config setspawn`을 통해 설정되며, `config.yml`에 자동으로 저장됩니다.

## 명령어
### 플레이어 명령어
*   `/join <팀이름>`: 지정된 팀에 참여합니다. (예: `/join RED`) - 팀 이름 자동 완성 지원
*   `/bw team`: 팀 채팅 모드를 켜거나 끕니다.

### 관리자 명령어 (OP 권한 필요)
*   `/bw start`: 기지전쟁 게임을 시작합니다. (5초 카운트다운 후 시작)
*   `/bw stop`: 현재 진행 중인 게임을 강제로 종료합니다.
*   `/bw config setspawn`: 현재 위치를 게임 시작 시 모든 플레이어가 텔레포트될 글로벌 스폰 지점으로 설정합니다.
*   `/bw config inv <시간(초)>`: 게임 시작 시 적용될 무적 시간을 설정합니다. (예: `/bw config inv 300`은 5분으로 설정)

*   **참고**: `/bw` 명령어는 관리자(OP) 권한이 필요하며, 모든 명령어는 탭 자동 완성을 지원합니다.